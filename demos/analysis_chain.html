
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Analysis Workflow &#8212; PyAmpTools</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'demos/analysis_chain';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="iftpwa - Introduction" href="../ift/iftpwa_intro.html" />
    <link rel="prev" title="Introduction" href="../optimization.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">PyAmpTools</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    PyAmpTools
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Optimization</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../optimization.html">Introduction</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Analysis Workflow</a></li>




</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Information Field Theory</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ift/iftpwa_intro.html">iftpwa - Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ift/iftpwa_cf.html">iftpwa - Correlated Field Model</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ift/iftpwa_tips.html">iftpwa - Tips</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">AmpTools Related Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="libraryLoading.html">Loading Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="mle.html">Maximum Likelihood Estimation</a></li>
<li class="toctree-l1"><a class="reference internal" href="extract_ff.html">Extracting Fit Fractions</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotgen.html">Plotting Fit Results</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">FSROOT Related Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="fsroot_intro.html">FSROOT Introductory Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="fsroot_advanced.html">FSROOT Advanced Tutorial</a></li>



</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/lan13005/PyAmpTools" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/lan13005/PyAmpTools/issues/new?title=Issue%20on%20page%20%2Fdemos/analysis_chain.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/demos/analysis_chain.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Analysis Workflow</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Analysis Workflow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-example">Workflow Example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#default-yaml-file">Default YAML file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#print-contents-of-yaml-file">Print contents of yaml file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-the-event-sample">Processing the event sample</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#have-data">Have Data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drawing-simulations">Drawing Simulations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-the-mle-fits-using-iminuit">Run the MLE fits using iminuit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-mcmc-fits-using-nuts-algorithm">Run MCMC fits using NUTS algorithm</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-iftpwa-fit">Run <code class="docutils literal notranslate"><span class="pre">iftpwa</span></code> fit</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-plots">Additional Plots</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-projected-moments">Plot projected moments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-of-the-complex-plane">Plots of the complex plane:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-of-the-intensity-distributions">Plots of the intensity distributions:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cleanup">Cleanup</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analysis-workflow">
<h1>Analysis Workflow<a class="headerlink" href="#analysis-workflow" title="Link to this heading">#</a></h1>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="motivation">
<h1>Motivation<a class="headerlink" href="#motivation" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Partial wave analysis can be complicated (fitting, bookkeeping, result handling, â€¦)</p></li>
<li><p>PyAmpTools sacrifices flexibility for ease of use and focuses on Python as the core language</p></li>
<li><p><strong>Features:</strong></p>
<ul>
<li><p>Scientific Python ecosystem is massive (achieve most of the benefits of low level languages without the hassle)</p></li>
<li><p>Optimization uses gradients provided by JAX automatic differentiation (scales better than numerical diff.)</p></li>
<li><p>Hooks into several optimization frameworks spanning MLE, MCMC, to Variational Inference</p>
<ul>
<li><p>iminuit, scipy, numpyro, iftpwa</p></li>
</ul>
</li>
<li><p>YAML file is used to configure the analysis for consistency and automation</p></li>
<li><p>Fitting is generally done through the command line</p></li>
</ul>
</li>
</ul>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="workflow-example">
<h1>Workflow Example<a class="headerlink" href="#workflow-example" title="Link to this heading">#</a></h1>
<p>The following analysis chain is an example of an <strong>input/output</strong> study. If you have data then you can skip you basically skip the first two steps.</p>
<ol class="arabic simple">
<li><p>We draw a sample from the nifty prior distribution</p></li>
<li><p>generate simulations (using <code class="docutils literal notranslate"><span class="pre">gen_amp</span></code> + <code class="docutils literal notranslate"><span class="pre">halld_sim/Piecewise</span></code> amplitude mimicking prior sample)</p></li>
<li><p>bin the data</p></li>
<li><p>fit the simulated data using:</p>
<ul class="simple">
<li><p>Maximum Likelihood Estimation (MLE)</p></li>
<li><p>Markov Chain Monte Carlo (MCMC)</p></li>
<li><p>Information Field Theory (IFT)</p></li>
</ul>
</li>
<li><p>plot the results</p></li>
</ol>
<p>We would like to show a high probability of reconstruction. If this occurs for a wide variety of samples (and we believe our data could be approximately described by the very-flexible nifty prior) then we have successfully demonstrated that inference would be robust.</p>
<p><img alt="alt text" src="../_images/optimization_mermaid.png" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">subprocess</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyamptools.utility.resultManager</span><span class="w"> </span><span class="kn">import</span> <span class="n">ResultManager</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pyamptools.utility.resultManager</span><span class="w"> </span><span class="kn">import</span> <span class="p">(</span>
    <span class="n">plot_binned_intensities</span><span class="p">,</span> 
    <span class="n">plot_binned_complex_plane</span><span class="p">,</span> 
    <span class="n">plot_overview_across_bins</span><span class="p">,</span> 
    <span class="n">plot_moments_across_bins</span><span class="p">,</span> 
    <span class="n">plot_gen_curves</span><span class="p">,</span>
    <span class="n">montage_and_gif_select_plots</span>
<span class="p">)</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pdf2image</span><span class="w"> </span><span class="kn">import</span> <span class="n">convert_from_path</span>

<span class="k">def</span><span class="w"> </span><span class="nf">run_command</span><span class="p">(</span><span class="n">command</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Captures output so we do not have to dump everything to the terminal&quot;&quot;&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">capture_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span> <span class="n">result</span><span class="o">.</span><span class="n">stderr</span>

<span class="k">def</span><span class="w"> </span><span class="nf">show_pdf</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">150</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Show a PDF in the notebook cell, rasterized since vscode jupyter cannot render PDFs</span>
<span class="sd">    </span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">img</span> <span class="o">=</span> <span class="n">convert_from_path</span><span class="p">(</span><span class="n">pdf_path</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="n">dpi</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">display</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>

<span class="n">PYAMPTOOLS_HOME</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;PYAMPTOOLS_HOME&quot;</span><span class="p">)</span>
<span class="n">BASE_DIRECTORY</span> <span class="o">=</span> <span class="s2">&quot;RESULTS_TEST&quot;</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Welcome to JupyROOT 6.28/06
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Doing some pre-run cleanup...&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;rm -rf main.yaml local_beam.conf *.lock&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;rm -rf </span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Doing some pre-run cleanup...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
<section id="default-yaml-file">
<h2>Default YAML file<a class="headerlink" href="#default-yaml-file" title="Link to this heading">#</a></h2>
<p>First we create a copy of the default YAML file which contains comments that explain each key/knob in the analysis</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">main_yaml</span> <span class="o">=</span> <span class="s2">&quot;main.yaml&quot;</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Generating default YAML file...&quot;</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pa from_default -o </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2"> -t twops -c&quot;</span><span class="p">)</span> <span class="c1"># -c for starting clean slate</span>

<span class="c1"># Update required fields the user is supposed to update manually for testing</span>
<span class="n">cwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="n">update_required_fields</span> <span class="o">=</span> <span class="p">[</span>
    <span class="sa">f</span><span class="s2">&quot;sed -i &#39;s|_BASE_DIRECTORY_|</span><span class="si">{</span><span class="n">cwd</span><span class="si">}</span><span class="s2">/</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">|g&#39; </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="sa">f</span><span class="s2">&quot;sed -i &#39;s|_DATA_SOURCES_|DATA_SOURCES|g&#39; </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
<span class="p">]</span>
<span class="k">for</span> <span class="n">cmd</span> <span class="ow">in</span> <span class="n">update_required_fields</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Updated required fields in YAML file...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Generating default YAML file...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Updated required fields in YAML file...
</pre></div>
</div>
</div>
</div>
<section id="print-contents-of-yaml-file">
<h3>Print contents of yaml file<a class="headerlink" href="#print-contents-of-yaml-file" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">rich.console</span><span class="w"> </span><span class="kn">import</span> <span class="n">Console</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">rich.syntax</span><span class="w"> </span><span class="kn">import</span> <span class="n">Syntax</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">yaml_content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

<span class="n">console</span> <span class="o">=</span> <span class="n">Console</span><span class="p">()</span>
<span class="n">console</span><span class="o">.</span><span class="n">print</span><span class="p">(</span><span class="n">Syntax</span><span class="p">(</span><span class="n">yaml_content</span><span class="p">,</span> <span class="s2">&quot;yaml&quot;</span><span class="p">,</span> <span class="n">theme</span><span class="o">=</span><span class="s1">&#39;default&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><pre style="white-space:pre;overflow-x:auto;line-height:normal;font-family:Menlo,'DejaVu Sans Mono',consolas,'Courier New',monospace"><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">defaults_location</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                            </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">base_directory</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">/d/grid17/ln16/PyAmpTools/demos/RESULTS_TEST</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># base directory for all results</span><span style="background-color: #f8f8f8">                      </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">data_folder</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${base_directory}/DATA_SOURCES</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># folder for data sources that will be binned</span><span style="background-color: #f8f8f8">                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_processes</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">4</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># global number of processes to generally use</span><span style="background-color: #f8f8f8">                                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">polarizations</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">"000"</span><span style="background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># polarization magnitude in each orientation</span><span style="background-color: #f8f8f8">                                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">waveset</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">Sp0+_Sp0-_Dp2+_Dp2-</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># underscore separated list of waves to use</span><span style="background-color: #f8f8f8">                                           </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">phase_reference</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">Sp0+_Sp0-</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># reference wave in each reflectivity sector</span><span style="background-color: #f8f8f8">                                            </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">reaction</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">Beam Proton Pi0 Eta</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># amptools reaction scheme</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">daughters</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Daughter masses</span><span style="background-color: #f8f8f8">                                                                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">Pi0</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.135                                                                                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">Eta</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.548                                                                                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">min_mass</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.04</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># minimum mass to consider</span><span style="background-color: #f8f8f8">                                                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">max_mass</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.72</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># maximum mass to consider</span><span style="background-color: #f8f8f8">                                                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_mass_bins</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">17</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of mass bins to use</span><span style="background-color: #f8f8f8">                                                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">min_t</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># minimum t to consider</span><span style="background-color: #f8f8f8">                                                                                 </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">max_t</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># maximum t to consider</span><span style="background-color: #f8f8f8">                                                                                 </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_t_bins</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of t bins to use</span><span style="background-color: #f8f8f8">                                                                              </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">acceptance_correct</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># whether to apply acceptance corrections</span><span style="background-color: #f8f8f8">                                                 </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">datareader</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">ROOTDataReader</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># data reader to use</span><span style="background-color: #f8f8f8">                                                                    </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">coordinate_system</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">cartesian</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># ['cartesian', 'polar'], dont use polar</span><span style="background-color: #f8f8f8">                                              </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bins_per_group</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># create group dirs grouping bins allowing nifty to handle finer bins</span><span style="background-color: #f8f8f8">                            </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">merge_grouped_trees</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># remerge the trees in each group</span><span style="background-color: #f8f8f8">                                                        </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">constrain_grouped_production</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># if not remerging, we can choose to constrain amplitudes in each group to be t</span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">real_waves</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">""</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># same form as waveset, define which waves are purely real</span><span style="background-color: #f8f8f8">                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">fixed_waves</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">""</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># same form as waveset, define which waves are fixed</span><span style="background-color: #f8f8f8">                                               </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">add_amp_factor</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">""</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Add an amplitude factor to every amplitude. For example, OmegaDalitz 0.1212 0.0257 0.0 0.0 wil</span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">append_to_decay</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">""</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># append this string to the decay amplitude, i.e. 'omega3pi' can be appended to Vec_ps_refl amp</span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">append_to_cfg</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">""</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># append this string to the AmpTools configuration file</span><span style="background-color: #f8f8f8">                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">coherent_sums</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Dict[coherentSumName: UnderscoreSeparatedListOfWaves], i.e. D+: Dp0+_Dp2+</span><span style="background-color: #f8f8f8">                    </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">mle</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">seed</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">42</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># rng seed</span><span style="background-color: #f8f8f8">                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">100</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># production coenfficients sampled uniformly from [-scale, scale]</span><span style="background-color: #f8f8f8">                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_random_intializations</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">20</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of random initializations to perform</span><span style="background-color: #f8f8f8">                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">method</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">minuit-analytic</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># ['minuit-numeric', 'minuit-analytic', 'L-BFGS-B']</span><span style="background-color: #f8f8f8">                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">stdout</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># dump to stdout instead of log file</span><span style="background-color: #f8f8f8">                                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bins</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># list of bin indices to process, null = all bins</span><span style="background-color: #f8f8f8">                                                     </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">regularization</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Affects Likelihood manager directly (only use with MLE fits)</span><span style="background-color: #f8f8f8">                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">apply_regularization</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># whether to apply regularization or not</span><span style="background-color: #f8f8f8">                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">method</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #ba2121; text-decoration-color: #ba2121; background-color: #f8f8f8">"none"</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># ['none', 'lasso', 'ridge', 'elasticnet']</span><span style="background-color: #f8f8f8">                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">lambdas</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># regularization strength for all partial waves</span><span style="background-color: #f8f8f8">                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">en_alpha</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># (e)lastic (n)et -&gt; 0=Lasso, 1=Ridge, 0&lt;x&lt;1 favors one side</span><span style="background-color: #f8f8f8">                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">mcmc</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">seed</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">42</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># rng seed</span><span style="background-color: #f8f8f8">                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bins</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># process all bins if null, otherwise list of bin indices</span><span style="background-color: #f8f8f8">                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_processes</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${n_processes}</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of processes to distribute work over</span><span style="background-color: #f8f8f8">                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">prior_scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1000.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># prior scale for the magnitude of the complex amplitudes, very wide</span><span style="background-color: #f8f8f8">                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">prior_dist</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">gaussian</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># ['laplace', 'gaussian'] distribution for Real/Imag parts of amplitudes</span><span style="background-color: #f8f8f8">                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nchains</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">6</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS number of chains to use</span><span style="background-color: #f8f8f8">                                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nwarmup</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">500</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS number of warmup samples to use when adapting</span><span style="background-color: #f8f8f8">                                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nsamples</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1000</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS number of samples to draw</span><span style="background-color: #f8f8f8">                                                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">target_accept_prob</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.80</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS target acceptance probability</span><span style="background-color: #f8f8f8">                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">max_tree_depth</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">12</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS step max depth to search</span><span style="background-color: #f8f8f8">                                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">step_size</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS step size</span><span style="background-color: #f8f8f8">                                                                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">adapt_step_size</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS step size adaptation</span><span style="background-color: #f8f8f8">                                                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">dense_mass</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS dense mass matrix models correlations better</span><span style="background-color: #f8f8f8">                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">adapt_mass_matrix</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># NUTS mass matrix adaptation</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">moment_inversion</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">seed</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">42</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># rng seed</span><span style="background-color: #f8f8f8">                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_processes</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${n_processes}</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: number of processes</span><span style="background-color: #f8f8f8">                                                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bins</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># list of bin indices to process, null -&gt; all bins</span><span style="background-color: #f8f8f8">                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">source</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">mle</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># source of moments to invert from ResultManager, [mle, mcmc, ift, gen]</span><span style="background-color: #f8f8f8">                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">amplitude_scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># real/imag part of amplitudes start N(0, amplitude_scale)</span><span style="background-color: #f8f8f8">                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">num_particles</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">500</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: number of particles</span><span style="background-color: #f8f8f8">                                                                   </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">num_iterations</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">100</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: number of optimization steps to take</span><span style="background-color: #f8f8f8">                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">tightness</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1000</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: scale factor for loss function</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">loss_exponent</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">2</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: loss exponent, 1=L1, 2=L2 loss function</span><span style="background-color: #f8f8f8">                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">decay_iterations</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: steps to decay kernel by 1/e, null -&gt; num_iterations//5</span><span style="background-color: #f8f8f8">                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">initial_scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: initial kernel bandwidth scale</span><span style="background-color: #f8f8f8">                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">min_scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: minimum kernel bandwidth scale</span><span style="background-color: #f8f8f8">                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">step_size</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.01</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># SVGD: step size for Adam optimizer</span><span style="background-color: #f8f8f8">                                                             </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nifty</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">yaml</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${NIFTY}</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Dictionary for config file used by iftpwa</span><span style="background-color: #f8f8f8">                                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">force_load_normint</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># force loading normalization integrals (used for prior simulation)</span><span style="background-color: #f8f8f8">                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">mpi_processes</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${n_processes}</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of mpi processes to use</span><span style="background-color: #f8f8f8">                                                   </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">NIFTY</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">GENERAL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">pwa_manager</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">GLUEX                                                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">seed</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">5</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Seed for iftpwa RNG</span><span style="background-color: #f8f8f8">                                                                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">verbosityLevel</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">outputFolder</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${base_directory}/NIFTY</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Expected location for nifty results</span><span style="background-color: #f8f8f8">                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">fitResultPath</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${NIFTY.GENERAL.outputFolder}/niftypwa_fit.pkl</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># iftpwa fit results pkl file</span><span style="background-color: #f8f8f8">                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">maxNIFTyJobs</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Lock to 1, change nifty.mpi_processes to distribute work</span><span style="background-color: #f8f8f8">                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">initial_position_std</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Prior model std, see NIFTY/optimize_kl.py for more details (is the default)</span><span style="background-color: #f8f8f8">        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">default_yaml</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">PWA_MANAGER</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">yaml</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${NIFTY.GENERAL.outputFolder}/main.yaml</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># main yaml file, this file</span><span style="background-color: #f8f8f8">                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">IFT_MODEL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">scale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">auto</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># overall scale factor for amplitude</span><span style="background-color: #f8f8f8">                                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nCalcScale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">500</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of samples used to estimate IFT_MODEL.scale</span><span style="background-color: #f8f8f8">                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">positiveScale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">half_normal</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># distribution for scale factor (half_normal, sqrt_exp)</span><span style="background-color: #f8f8f8">                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">useLogNormalPriorSlope</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># use log normal prior for the slope of the power spectra instead of normal</span><span style="background-color: #f8f8f8">      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">useGammaFlex</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># use Gamma distribution for the flexibility of the power spectra</span><span style="background-color: #f8f8f8">                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">useLaplaceScale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># should be same as setting positiveScale = sqrt_exp</span><span style="background-color: #f8f8f8">                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">useGammaAsp</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># use Gamma distribution for the asperity of the power spectra</span><span style="background-color: #f8f8f8">                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">loglogavgslope</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">-4.0</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">0.1</span><span style="background-color: #f8f8f8">]</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [mean, std] of the power spectrum slope (log-log scale) for mass axis</span><span style="background-color: #f8f8f8">            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">flexibility</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [mean, std] of the flexibility of the power spectra for mass axis</span><span style="background-color: #f8f8f8">                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">asperity</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [mean, std] of the asperity of the power spectra for mass axis</span><span style="background-color: #f8f8f8">                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">stdOffset</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">1.0</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">0.001</span><span style="background-color: #f8f8f8">]</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [mean, std] of the STD of the amplitude offset</span><span style="background-color: #f8f8f8">                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">dofdexStye</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">real_imag</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># (real_imag, single_dofdex) allows fields to share the same power spectrum model</span><span style="background-color: #f8f8f8">        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">custom_model_path</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># (YAML reference) defined below, i.e. ${PARAMETRIC_MODEL}. Set null if you do not want</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">modelName</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">constructed                                                                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">res2bkg</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># globally scale ALL parametric/resonance contributions before adding to bkgnd to form the signal</span><span style="background-color: #f8f8f8"> </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bkg2res</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># globally scale ALL bkgnd contributions before adding to parametric/resonance to form the signal</span><span style="background-color: #f8f8f8"> </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">tPrimeFalloff</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># preweight t distribution. Legacy</span><span style="background-color: #f8f8f8">                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">estimateRatios</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># use the user-provided dataset ratios. Unused by GlueX</span><span style="background-color: #f8f8f8">                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">perTprimeScaling</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># scale each t bin separately</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">altTprimeNorm</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">no_norm</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># (peak_norm, no_norm, kin_norm) normalize scheme of phase space multiplier for each t-b</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">noInterpScipy</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># use scipy.interpolate.interp1d cubic interpolation instead of nifty.interp linear interp</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">phaseSpaceMultiplier</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${base_directory}/phasespace.pkl</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Path to a pickled file containing phase space factors,</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">s0</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># energy scale factor</span><span style="background-color: #f8f8f8">                                                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">productionFactor</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">GLUEX</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Production factor scheme, depends on beam energy and target mass</span><span style="background-color: #f8f8f8">                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">####### BELOW ARE ONLY USED IF USING MULTIPLE DATASETS #######</span><span style="background-color: #f8f8f8">                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_fluct</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_fluc_std</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_slope</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_stdSlope</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_slopeTprime</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_stdSlopeTprime</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_std_offset</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">ratio_std_std_offset</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null                                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">PARAMETRIC_MODEL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># to use, set NIFTY.IFT_MODEL.custom_model_path: ${NIFTY.PARAMETRIC_MODEL}</span><span style="background-color: #f8f8f8">                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">smoothScales</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># uses a correlated field to smooth the t-dependence of the parameteric models</span><span style="background-color: #f8f8f8">             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">parameter_priors</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Define prior distributions for the free parameters</span><span style="background-color: #f8f8f8">                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">      </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># see iftpwa/src/utilities/nifty.py for available priors but most parameters should be positive so log-normal</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">      </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">m_a2_1320</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">UnnamedLogNormalOperator(sigma=0.0006, mean=1.3182)                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">      </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">w_a2_1320</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">UnnamedLogNormalOperator(sigma=0.0055, mean=0.1111)                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># (name) of resonance, (fun)ction name, (preScale) this component, request no correlated field (no_bkg)</span><span style="background-color: #f8f8f8">        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   (paras) parameter priors, (static_paras) static parameters needed by (fun)</span><span style="background-color: #f8f8f8">                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   and (waves) this component couples to</span><span style="background-color: #f8f8f8">                                                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">resonances</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">      </span><span style="background-color: #f8f8f8">[                                                                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">        </span><span style="background-color: #f8f8f8">{                                                                                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">          a2_1320</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">            </span><span style="background-color: #f8f8f8">{                                                                                                      </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              name</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">$a_2(1320)$</span><span style="background-color: #f8f8f8">,                                                                                   </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              fun</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">breitwigner_dyn</span><span style="background-color: #f8f8f8">,                                                                                </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              preScale</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">1.0</span><span style="background-color: #f8f8f8">,                                                                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              no_bkg</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">false</span><span style="background-color: #f8f8f8">,                                                                                       </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              paras</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">{</span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold"> mass</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">m_a2_1320</span><span style="background-color: #f8f8f8">,</span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold"> width</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">w_a2_1320</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">},                                                        </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              static_paras</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">{</span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold"> spin</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">2</span><span style="background-color: #f8f8f8">,</span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold"> mass1</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">0.548</span><span style="background-color: #f8f8f8">,</span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold"> mass2</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">0.135</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">},                                               </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">              waves</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dm1-</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dp0-</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dp1-</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dp0+</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dp1+</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">Dp2+</span><span style="background-color: #f8f8f8">],                                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">            </span><span style="background-color: #f8f8f8">},                                                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">        </span><span style="background-color: #f8f8f8">},                                                                                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">      </span><span style="background-color: #f8f8f8">]                                                                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">OPTIMIZATION</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="background-color: #f8f8f8">                                                                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Posterior samples. We actually get 2x nSamples in the end due to 'antithetic' sampling</span><span style="background-color: #f8f8f8">                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nSamples</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">2</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">0</span><span style="background-color: #f8f8f8">],</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">2</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">5</span><span style="background-color: #f8f8f8">],</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">10</span><span style="background-color: #f8f8f8">]</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [[nI1, nS1], ...] -&gt; run nI1 iterations with nS1 samples then nI2 with nS2, ..</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nIterGlobal</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">5</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of global iterations to run NIFTy optimize_kl. ~25-50 is pretty deep already</span><span style="background-color: #f8f8f8">           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nMultiStart</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of multiple restarts to perform (each only a fixed single global iteration) that optimi</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">multiStartObjective</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">minimize|energy</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># pipe separated direction|quantity to select best starting condition</span><span style="background-color: #f8f8f8">     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">algoOptKL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">LBFGS</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># algorithm for KL minimization</span><span style="background-color: #f8f8f8">                                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nIterMaxOptKL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">1</span><span style="background-color: #f8f8f8">,</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">50</span><span style="background-color: #f8f8f8">],</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">50</span><span style="background-color: #f8f8f8">]</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># [[nI1, nMax1], ...] -&gt; run nI1 iterations with nMax1 KL steps, then nI2 with nMa</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">deltaEKL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.001</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># increase convergence counter if change in KL energy is below this value</span><span style="background-color: #f8f8f8">                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">convergenceLvlKL</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">2</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># convergence counter must reach this value to be considered converged</span><span style="background-color: #f8f8f8">                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nIterMaxSamples</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1000</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># iteration limit for sampling</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">deltaESampling</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># convergence threshold for sampling</span><span style="background-color: #f8f8f8">                                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">convergenceLvlSampling</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">2</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># convergence counter threshold for sampling</span><span style="background-color: #f8f8f8">                                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">algoOptGeoVI</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">Newton</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># algorithm for GeoVI</span><span style="background-color: #f8f8f8">                                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nIterMaxGeoVI</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">50</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># iteration limit for GeoVI</span><span style="background-color: #f8f8f8">                                                                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">deltaEGeoVI</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.001</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># convergence threshold for GeoVI</span><span style="background-color: #f8f8f8">                                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">convergenceLvlGeoVI</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">2</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># convergence counter threshold for GeoVI</span><span style="background-color: #f8f8f8">                                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">resume</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># resume previous fit or overwrite</span><span style="background-color: #f8f8f8">                                                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">niftyCache</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${NIFTY.GENERAL.outputFolder}</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># results dumped here $niftyCache/niftypwa_fit.pkl</span><span style="background-color: #f8f8f8">                   </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">overwriteCache</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># overwrite cache if it exists</span><span style="background-color: #f8f8f8">                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">sanityChecks</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># run sanity checks on the fit</span><span style="background-color: #f8f8f8">                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">constants</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">[</span><span style="color: #19177c; text-decoration-color: #19177c; background-color: #f8f8f8">tamps_mass_dir_loglogavgslope</span><span style="background-color: #f8f8f8">]</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># names of latent space variables that should be fixed</span><span style="background-color: #f8f8f8">              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">LIKELIHOOD</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># ADVANCED (Can ignore)</span><span style="background-color: #f8f8f8">                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">approximation</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># approximate the likelihood with Gaussian</span><span style="background-color: #f8f8f8">                                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">metric_type</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">normal</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># type of metric to use for the likelihood (normal, studentt)</span><span style="background-color: #f8f8f8">                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">learn_metric</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># can learn metric but not recommended</span><span style="background-color: #f8f8f8">                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">learn_metric_sigma</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0                                                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">subSampleProb</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># subsample the data to speed up likelihood calculation</span><span style="background-color: #f8f8f8">                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">initialSubSampleProb</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># scale the initial signal field by this factor</span><span style="background-color: #f8f8f8">                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">subSampleApproxIndep</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># legacy, unused</span><span style="background-color: #f8f8f8">                                                                   </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">nKeepMetric</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">1</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># global iterations at nKeepMetric intervals will not approximate the likelihood</span><span style="background-color: #f8f8f8">                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">theta_studentt</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># theta parameter for student-t distribution</span><span style="background-color: #f8f8f8">                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bootstrap</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">false</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># bootstrap the data to introduce more stochasticity</span><span style="background-color: #f8f8f8">                                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">external_approximation</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># path to an external pickle file, null if not used</span><span style="background-color: #f8f8f8">                               </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">dropout_prob</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0.0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># dropout probability for each kinematic bin, adds stochasticity</span><span style="background-color: #f8f8f8">                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">rotate_phase</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">null</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># null or bool</span><span style="background-color: #f8f8f8">                                                                              </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">clip_latent</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">0</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># float [0, 1] fractional scaling of latent space between (-clip_latent, clip_latent) prevent la</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">HYPERPARAMETER_SCANS</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Run scans by passing --hyperopt to `pa run_ift`</span><span style="background-color: #f8f8f8">                                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Scans are performed by [Optuna](https://github.com/optuna/optuna).</span><span style="background-color: #f8f8f8">                                           </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   - iftpwa naturally tracks the KL energy and the intensity of all individual amplitude components.</span><span style="background-color: #f8f8f8">          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   - if a ground truth is provided, the mean squared error or chi-squared (if number of samples &gt; 1) are also </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Above metrics are all available to be optimized against.</span><span style="background-color: #f8f8f8">                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># These metrics take the form `{amplitude_field_name}_{"fit", resonance_name, "bkg"}_{"intens", "chi2"}`.</span><span style="background-color: #f8f8f8">      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   - A list of tracked metrics can be dumped at the end of a iftpwa fit if `verbosityLevel` &gt; 0 if you are uns</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Aggregated stats for `chi2` metric is also calculated: `{min, -2sigma, -1sigma, median, 1sigma, 2sigma, max}`</span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Fields within this yaml can be referenced following a field path that is period delimited.</span><span style="background-color: #f8f8f8">                   </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># An Optuna `suggest` command and associated args must also be passed. Field values must be a</span><span style="background-color: #f8f8f8">                  </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># string that is then `eval`'d by `python` to construct `args` and `kwargs`.</span><span style="background-color: #f8f8f8">                                   </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   - For example, OPTIMIZATION.nSamples.1|suggest_int: "2, 10, step=2"` would modify the</span><span style="background-color: #f8f8f8">                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#     `nSamples` sub-field within the `OPTIMIZATION` field of `NIFTY` field so that Optuna makes integer</span><span style="background-color: #f8f8f8">       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#     suggestions on list index element 1. The suggestions are integers between 2 and 10 in steps of 2.</span><span style="background-color: #f8f8f8">        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic">#   - See Optuna docs for available `suggest` commands.</span><span style="background-color: #f8f8f8">                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_trials</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">10</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># number of trials for the hyperparamter scan</span><span style="background-color: #f8f8f8">                                                     </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">objective</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">minimize|energy</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># direction|objective see multiStartObjective</span><span style="background-color: #f8f8f8">                                       </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">    </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">sampler</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">RandomSampler</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># see https://optuna.readthedocs.io/en/stable/reference/samplers/index.html</span><span style="background-color: #f8f8f8">             </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">amptools</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># DEPRECATED, no longer using for MLE</span><span style="background-color: #f8f8f8">                                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">output_directory</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${base_directory}/BINNED_DATA</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="color: #3d7b7b; text-decoration-color: #3d7b7b; background-color: #f8f8f8; font-style: italic"># Expected location for amptools results</span><span style="background-color: #f8f8f8">                         </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">search_format</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">group                                                                                             </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_randomizations</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${n_processes}                                                                                 </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">bins_per_group</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${bins_per_group}                                                                                </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">merge_grouped_trees</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${merge_grouped_trees}                                                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">mle_query_1</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">status == 0 &amp; ematrix == 3                                                                          </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">mle_query_2</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">delta_nll==0                                                                                        </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">constrain_grouped_production</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${constrain_grouped_production}                                                    </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">regex_merge</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">--regex_merge '.*::.*::'                                                                            </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">n_processes</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">${n_processes}                                                                                      </span>
<span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8">  </span><span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">skip_plotting_mle</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">true                                                                                          </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">pyamptools_commit_hash</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">277f26c3f7f36bdec5f00fe67729fd2dd4f5aac1                                                   </span>
<span style="color: #008000; text-decoration-color: #008000; background-color: #f8f8f8; font-weight: bold">iftpwa_commit_hash</span><span style="color: #000000; text-decoration-color: #000000; background-color: #f8f8f8">:</span><span style="color: #bbbbbb; text-decoration-color: #bbbbbb; background-color: #f8f8f8"> </span><span style="background-color: #f8f8f8">f7f89b6cef3ca49316d8c3e6bcd48a6f6f1754b9                                                       </span>
<span style="background-color: #f8f8f8">                                                                                                                   </span>
</pre>
</div></div>
</div>
</section>
</section>
<section id="processing-the-event-sample">
<h2>Processing the event sample<a class="headerlink" href="#processing-the-event-sample" title="Link to this heading">#</a></h2>
<section id="have-data">
<h3>Have Data?<a class="headerlink" href="#have-data" title="Link to this heading">#</a></h3>
<p><strong>If you already have a data sample:</strong>
You obviously will not need to draw a sample from the prior. You will need to update the YAML file to properly use your data sample. Most of the keys you need to modify are top level keys. These keys specify your dataset, reaction, and kinematic binning. Once that is done, you can run the following commands and you will be ready to perform fits. Depending on your dataset size and model, the default settings for the optimization schemes may not be appropriate.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update &lt;main_yaml&gt; to use your data sample, reaction, kinematic binning, etc.</span>
<span class="c1"># In your shell, run the following commands</span>
pa<span class="w"> </span>run_cfgGen<span class="w"> </span>&lt;main_yaml&gt;
pa<span class="w"> </span>run_divideData<span class="w"> </span>&lt;main_yaml&gt;
pa<span class="w"> </span>run_processEvents<span class="w"> </span>&lt;main_yaml&gt;
</pre></div>
</div>
</section>
<section id="drawing-simulations">
<h3>Drawing Simulations<a class="headerlink" href="#drawing-simulations" title="Link to this heading">#</a></h3>
<p>Draw a sample from the iftpwa prior model then simulate data from the model and phase space MC. Then divide the data into kinematic bins.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">seed</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1"># rng seed for reproducibility</span>
<span class="n">t_slope</span> <span class="o">=</span> <span class="mf">3.0</span> <span class="c1"># slope of the momentum transfer (exponentially distributed)</span>
<span class="n">min_ebeam</span> <span class="o">=</span> <span class="mf">8.2</span> <span class="c1"># minimum energy of the photon beam</span>
<span class="n">max_ebeam</span> <span class="o">=</span> <span class="mf">8.8</span> <span class="c1"># maximum energy of the photon beam</span>
<span class="n">n_data</span> <span class="o">=</span> <span class="mi">10000</span> <span class="c1"># number of data samples to generate</span>
<span class="n">n_ps</span> <span class="o">=</span> <span class="mi">50000</span>   <span class="c1"># number of phase space samples to generate</span>

<span class="c1"># -c for starting clean</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running prior simulation...&quot;</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pa run_priorSim </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2"> -s </span><span class="si">{</span><span class="n">seed</span><span class="si">}</span><span class="s2"> -emin </span><span class="si">{</span><span class="n">min_ebeam</span><span class="si">}</span><span class="s2"> -emax </span><span class="si">{</span><span class="n">max_ebeam</span><span class="si">}</span><span class="s2"> -t </span><span class="si">{</span><span class="n">t_slope</span><span class="si">}</span><span class="s2"> -nd </span><span class="si">{</span><span class="n">n_data</span><span class="si">}</span><span class="s2"> -np </span><span class="si">{</span><span class="n">n_ps</span><span class="si">}</span><span class="s2"> -c&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running prior simulation...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Prior simulation complete, drawing results...&quot;</span><span class="p">)</span>
<span class="n">resultManager</span> <span class="o">=</span> <span class="n">ResultManager</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_load_all</span><span class="p">()</span>
<span class="n">plot_gen_curves</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/gen_curves.pdf&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">resultManager</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Prior simulation complete, drawing results...
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<img alt="../_images/425ede03522752efe040cd7be415c887073921ef31f99713ec7ea8d5263613db.png" src="../_images/425ede03522752efe040cd7be415c887073921ef31f99713ec7ea8d5263613db.png" />
</div>
</div>
</section>
</section>
<section id="run-the-mle-fits-using-iminuit">
<h2>Run the MLE fits using iminuit<a class="headerlink" href="#run-the-mle-fits-using-iminuit" title="Link to this heading">#</a></h2>
<p>We begin by running a set of maximum likelihood fits on the generated data and compare the results to the generated amplitudes. The specifications for this optimization are specified in the YAML file under the <code class="docutils literal notranslate"><span class="pre">mle</span></code> key.</p>
<p>The <strong>ResultManager</strong> class, when initialized with the path to the YAML file, will automatically attempt to load all results into memory. Each result (from MLE, MCMC, IFT) is stored a separate directory for unique access. All results (complex amplitude values, intensities, and metadata like mass, likelihood, etc.) are pulled into a flat pandas dataframe for efficient plotting and analysis.</p>
<p>The main â€œmoneyâ€ plot (intensity and relative phases of all partial waves) can be generated with the default plotting function, <strong>plot_overview_across_bins</strong>. The MLE results a slightly jittered to avoid too much overlap. The <strong>dashed lines</strong> are the generated amplitudes</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running MLE fits...&quot;</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pa run_mle </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running MLE fits...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MLE fits complete, plotting results...&quot;</span><span class="p">)</span>
<span class="n">resultManager</span> <span class="o">=</span> <span class="n">ResultManager</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># Silence all the helpful output for clean documentation</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_load_all</span><span class="p">()</span>
<span class="n">plot_overview_across_bins</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">montage_and_gif_select_plots</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/intensity_and_phases/montage_output.pdf&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">resultManager</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MLE fits complete, plotting results...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=================================================================

=================================================================
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<img alt="../_images/b72a62da08f0137afc4b65e09791ef31d4a017c9ee95247d41b0780084e30696.png" src="../_images/b72a62da08f0137afc4b65e09791ef31d4a017c9ee95247d41b0780084e30696.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
</pre></div>
</div>
</div>
</div>
</section>
<section id="run-mcmc-fits-using-nuts-algorithm">
<h2>Run MCMC fits using NUTS algorithm<a class="headerlink" href="#run-mcmc-fits-using-nuts-algorithm" title="Link to this heading">#</a></h2>
<p>MCMC is a set of techniques that draws samples from the posterior distribution. This framework uses Hamiltonian Monte Carlo (HMC) implemented in the No U-Turn Sampler (NUTS) algorithm. For this study, we choose 8 independent chains (each starting off in a different region of parameter space, traverses and draws samples from the posterior). <strong>n_warmup</strong> designates the number of samples to discard as the chains move toward a posterior mode and is used to adapt internal NUTS parameters. <strong>n_samples</strong> is the number of samples to draw for each chain. <strong>n_chains</strong> is drawn for each mass bin independently and the work is pooled across all <strong>n_processes</strong> processes</p>
<p>The newly created MCMC results is automatically loaded by the <strong>ResultManager</strong> class and the same plotting calls are made</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># We can also explicitly overwrite the options in the YAML file using these command line args</span>
<span class="n">n_processes</span> <span class="o">=</span> <span class="mi">17</span>
<span class="n">n_chains</span> <span class="o">=</span> <span class="mi">8</span>
<span class="n">n_warmup</span> <span class="o">=</span> <span class="mi">500</span>
<span class="n">n_samples</span> <span class="o">=</span> <span class="mi">100</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running MCMC fits...&quot;</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pa run_mcmc </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2"> -np </span><span class="si">{</span><span class="n">n_processes</span><span class="si">}</span><span class="s2"> -nc </span><span class="si">{</span><span class="n">n_chains</span><span class="si">}</span><span class="s2"> -nw </span><span class="si">{</span><span class="n">n_warmup</span><span class="si">}</span><span class="s2"> -ns </span><span class="si">{</span><span class="n">n_samples</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running MCMC fits...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;MCMC fits complete, plotting results...&quot;</span><span class="p">)</span>
<span class="n">resultManager</span> <span class="o">=</span> <span class="n">ResultManager</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_load_all</span><span class="p">()</span>
<span class="n">plot_overview_across_bins</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">montage_and_gif_select_plots</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/intensity_and_phases/montage_output.pdf&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">resultManager</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MCMC fits complete, plotting results...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=================================================================

=================================================================
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<img alt="../_images/1b53c5c35ed65e2a20aecf50c106addb62c5faf7c50c1551ad7ab0decd9b246c.png" src="../_images/1b53c5c35ed65e2a20aecf50c106addb62c5faf7c50c1551ad7ab0decd9b246c.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
</pre></div>
</div>
</div>
</div>
</section>
<section id="run-iftpwa-fit">
<h2>Run <code class="docutils literal notranslate"><span class="pre">iftpwa</span></code> fit<a class="headerlink" href="#run-iftpwa-fit" title="Link to this heading">#</a></h2>
<p>Finally we run a IFT analysis with the same prior model used to generate the synthetic data to obtain a posterior estimate. These are shown in the <strong>solid lines</strong>. The settings for the IFT model are specified in the YAML file under the <code class="docutils literal notranslate"><span class="pre">nifty</span></code> key.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Running IFT fit...&quot;</span><span class="p">)</span>
<span class="n">stdout</span><span class="p">,</span> <span class="n">stderr</span> <span class="o">=</span> <span class="n">run_command</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pa run_ift </span><span class="si">{</span><span class="n">main_yaml</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Running IFT fit...
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;IFT fit complete, plotting results...&quot;</span><span class="p">)</span>
<span class="n">resultManager</span> <span class="o">=</span> <span class="n">ResultManager</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_load_all</span><span class="p">()</span>
<span class="n">plot_overview_across_bins</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">montage_and_gif_select_plots</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/intensity_and_phases/montage_output.pdf&quot;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">resultManager</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>IFT fit complete, plotting results...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=================================================================

=================================================================
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<img alt="../_images/7983a7066b280d2a3626e5192718427f1047279e0ae81541d6f0e5f2cfa69e4d.png" src="../_images/7983a7066b280d2a3626e5192718427f1047279e0ae81541d6f0e5f2cfa69e4d.png" />
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="additional-plots">
<h1>Additional Plots<a class="headerlink" href="#additional-plots" title="Link to this heading">#</a></h1>
<p>This sections contains a few additional default plots that highlight different aspects of the analysis:</p>
<ol class="arabic simple">
<li><p>Plot projected moments</p></li>
<li><p>Plot inferred amplitudes in the complex plane</p></li>
<li><p>Plot intensity distributions</p></li>
</ol>
<p>We first need to create the plots which also requires projecting the amplitudes onto the moment basis.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Plotting additional results...&quot;</span><span class="p">)</span>
<span class="n">resultManager</span> <span class="o">=</span> <span class="n">ResultManager</span><span class="p">(</span><span class="n">main_yaml</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_load_all</span><span class="p">()</span>
<span class="n">resultManager</span><span class="o">.</span><span class="n">attempt_project_moments</span><span class="p">(</span><span class="n">normalization_scheme</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pool_size</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
<span class="n">plot_binned_complex_plane</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plot_binned_intensities</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">,</span> <span class="n">silence</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plot_moments_across_bins</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="n">montage_and_gif_select_plots</span><span class="p">(</span><span class="n">resultManager</span><span class="p">,</span> <span class="n">file_type</span><span class="o">=</span><span class="s1">&#39;pdf&#39;</span><span class="p">)</span>
<span class="k">del</span> <span class="n">resultManager</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Plotting additional results...
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>=================================================================

=================================================================
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>/d/grid17/ln16/miniconda/envs/pyamptools/lib/python3.9/site-packages/nifty8/library/correlated_fields.py:460: UserWarning: unable to add JAX operator for total_N=8
  warn(f&quot;unable to add JAX operator for total_N={total_N}&quot;)
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MomentManagerTwoPS| Calculating moments assuming a TwoPseudoscalar system with max J = 4
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MomentManagerTwoPS| Calculating moments assuming a TwoPseudoscalar system with max J = 4
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MomentManagerTwoPS| Calculating moments assuming a TwoPseudoscalar system with max J = 4
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>MomentManagerTwoPS| Calculating moments assuming a TwoPseudoscalar system with max J = 4
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
WARNING: The convert command is deprecated in IMv7, use &quot;magick&quot; instead of &quot;convert&quot; or &quot;magick convert&quot;

montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
WARNING: The convert command is deprecated in IMv7, use &quot;magick&quot; instead of &quot;convert&quot; or &quot;magick convert&quot;

montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
montage: unable to read font `&#39; @ error/annotate.c/RenderFreetype/1658.
</pre></div>
</div>
</div>
</div>
<section id="plot-projected-moments">
<h2>Plot projected moments<a class="headerlink" href="#plot-projected-moments" title="Link to this heading">#</a></h2>
<p>We can project the inferred amplitudes into moments to understand whether the scatter in the amplitude basis collapses onto a tighter space in the moment basis. This allows one to answer questions related to ambiguities and stability of the inference in the amplitude basis.</p>
<p>Here, we only plot the non-zero moments (given the set of inferred partial waves). The moments are normalized to the zeroth moment. The MLE point estimates are only shown (errors not propagated)</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/moments/montage_output.pdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/b3be7ca74d0d1641460d4b684dc698fcb3140c367380cc254da1e8a4836a6ef7.png" src="../_images/b3be7ca74d0d1641460d4b684dc698fcb3140c367380cc254da1e8a4836a6ef7.png" />
</div>
</div>
</section>
<section id="plots-of-the-complex-plane">
<h2>Plots of the complex plane:<a class="headerlink" href="#plots-of-the-complex-plane" title="Link to this heading">#</a></h2>
<p>The inferred amplitudes live in the complex plane. We can scatter the inferred amplitudes and compare the results from the different techniques to see how they compare. A comparison is only shown for one bin. The reference waves are shown as histograms since they have no imaginary component. The color of the scattered points in the non-reference waves is mapped to the intensity of the corresponding reference wave. In this example, the MLE and MCMC results agree and that the MLE errors track the MCMC samples. The band of MCMC solutions is from the smaller reference wave intensity not locking in a well defined phase</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/complex_plane/bin3_complex_plane.pdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/455cc90135f1be6ed0d5a05712a555f607eed1b77ce6a446b773fc15bf673520.png" src="../_images/455cc90135f1be6ed0d5a05712a555f607eed1b77ce6a446b773fc15bf673520.png" />
</div>
</div>
</section>
<section id="plots-of-the-intensity-distributions">
<h2>Plots of the intensity distributions:<a class="headerlink" href="#plots-of-the-intensity-distributions" title="Link to this heading">#</a></h2>
<p>The overview plot (intensity and relative phases as a function of mass) gives a qualitative description of the results. This plot shows the intensity distribution of the results from the various techniques in a single bin. The <span class="math notranslate nohighlight">\(D_2^-\)</span> wave in this bin is small. The estimated MLE uncertainties are bad in this case and covers negative values. The MCMC results shows a highly skewed distribution.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">show_pdf</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s2">/PLOTS/intensity/bin1_intensities.pdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/cea5a00f7a5a163c8a7de801681d5fe839218d571355707a063999926be27970.png" src="../_images/cea5a00f7a5a163c8a7de801681d5fe839218d571355707a063999926be27970.png" />
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="cleanup">
<h1>Cleanup<a class="headerlink" href="#cleanup" title="Link to this heading">#</a></h1>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Cleaning up...&quot;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;rm -rf main.yaml local_beam.conf *.lock&#39;</span><span class="p">)</span>
<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;rm -r </span><span class="si">{</span><span class="n">BASE_DIRECTORY</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Cleaning up...
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0
</pre></div>
</div>
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./demos"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="../optimization.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Introduction</p>
      </div>
    </a>
    <a class="right-next"
       href="../ift/iftpwa_intro.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">iftpwa - Introduction</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Analysis Workflow</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#motivation">Motivation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-example">Workflow Example</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#default-yaml-file">Default YAML file</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#print-contents-of-yaml-file">Print contents of yaml file</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-the-event-sample">Processing the event sample</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#have-data">Have Data?</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#drawing-simulations">Drawing Simulations</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-the-mle-fits-using-iminuit">Run the MLE fits using iminuit</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-mcmc-fits-using-nuts-algorithm">Run MCMC fits using NUTS algorithm</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-iftpwa-fit">Run <code class="docutils literal notranslate"><span class="pre">iftpwa</span></code> fit</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#additional-plots">Additional Plots</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plot-projected-moments">Plot projected moments</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-of-the-complex-plane">Plots of the complex plane:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#plots-of-the-intensity-distributions">Plots of the intensity distributions:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#cleanup">Cleanup</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lawrence Ng
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2025.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>